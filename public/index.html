<!DOCTYPE html>
<html>
    <head>
        <title>cve test 3</title>
    </head>
    <body>
        <h3>cve test 3</h3>

        <p>add here stuff to save it in the redis database</p>
        
        <form action="api/data" method="post">
            <textarea name="comment"></textarea>
            <button type="submit">save</button>
        </form>
        
        <hr>
        
        <h3>cve test area - with JSON, correctly parsed</h3>
        <section id="myItemList"></section>
        
        <hr>
        
        <h3>cve tests with server builded html</h3>
        <ul>
            <li><a href="api/vulnerable">vulnerable xss stuff</a></li>
            <li><a href="api/protected">protected xss stuff</a></li>
        </ul>
    </body>

    <script>
        // does not work because of JSON parser
        let xmlHttp = new XMLHttpRequest();
        xmlHttp.open("GET", 'api/data', false); // false for synchronous request
        xmlHttp.send(null);
        let items = JSON.parse(xmlHttp.responseText);
        
        items.forEach(function (item) {
            let div = document.createElement('div');
            div.innerHTML = item;
            document.getElementById('myItemList').appendChild(div);
        });
    </script>
</html>